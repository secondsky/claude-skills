{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/secondsky/claude-skills/schemas/marketplace.schema.json",
  "title": "Claude Skills Marketplace Schema",
  "description": "JSON schema for validating .claude-plugin/marketplace.json in the claude-skills repository",
  "type": "object",
  "required": ["name", "owner", "metadata", "plugins"],
  "additionalProperties": false,
  "properties": {
    "name": {
      "type": "string",
      "pattern": "^[a-z0-9-]+$",
      "description": "Marketplace name in kebab-case (e.g., 'claude-skills')"
    },
    "owner": {
      "type": "object",
      "required": ["name", "email", "url"],
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1,
          "description": "Owner or organization name"
        },
        "email": {
          "type": "string",
          "format": "email",
          "pattern": "^([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}|[a-zA-Z0-9._%+-]+@users\\.noreply\\.github\\.com)$",
          "description": "Contact email (standard format or GitHub noreply)"
        },
        "url": {
          "type": "string",
          "format": "uri",
          "pattern": "^https://github\\.com/[^/]+/[^/]+$",
          "description": "GitHub repository URL (HTTPS only)"
        }
      }
    },
    "metadata": {
      "type": "object",
      "required": ["description", "version", "homepage"],
      "additionalProperties": false,
      "properties": {
        "description": {
          "type": "string",
          "minLength": 10,
          "maxLength": 500,
          "description": "Marketplace description"
        },
        "version": {
          "type": "string",
          "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)$",
          "description": "Semantic version (major.minor.patch)"
        },
        "homepage": {
          "type": "string",
          "format": "uri",
          "description": "Marketplace homepage URL"
        }
      }
    },
    "plugins": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["name", "source", "version", "description"],
        "additionalProperties": false,
        "properties": {
          "name": {
            "type": "string",
            "pattern": "^[a-z0-9-]+$",
            "description": "Plugin name in kebab-case"
          },
          "source": {
            "type": "string",
            "pattern": "^\\./plugins/[^/]+$",
            "description": "Plugin source path (MUST start with './plugins/' to prevent cache bloat)"
          },
          "version": {
            "type": "string",
            "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)$",
            "description": "Plugin semantic version"
          },
          "description": {
            "type": "string",
            "minLength": 10,
            "maxLength": 500,
            "description": "Plugin description with use cases"
          },
          "keywords": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1
            },
            "minItems": 1,
            "uniqueItems": true,
            "description": "Search keywords for discoverability"
          },
          "category": {
            "type": "string",
            "enum": [
              "ai",
              "api",
              "architecture",
              "auth",
              "cloudflare",
              "cms",
              "data",
              "database",
              "design",
              "documentation",
              "frontend",
              "mobile",
              "security",
              "seo",
              "testing",
              "tooling",
              "web",
              "woocommerce"
            ],
            "description": "Plugin category for organization"
          }
        }
      }
    }
  }
}
